<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Usuarios</title>
</head>
<body>
  <h1>Gestión de Usuarios</h1>
  <p>Usuario logueado: <%= user.nombre %> (<%= user.rol %>)</p>
  <a href="/">Volver al menú</a> | <a href="/logout">Cerrar sesión</a>

  <h2>Registrar nuevo usuario</h2>
  <% if (error) { %>
    <p style="color:red"><%= error %></p>
  <% } %>
  <form action="/usuarios" method="POST">
    <label>Nombre: <input type="text" name="nombre" required></label><br>
    <label>Usuario: <input type="text" name="usuario" required></label><br>
    <label>Contraseña: <input type="text" name="contrasena" required></label><br>
    <label>Rol:
      <select name="rol" required>
        <option value="docente">Docente</option>
        <option value="estudiante">Estudiante</option>
      </select>
    </label><br>
    <button type="submit">Crear Usuario</button>
  </form>

  <h2>Lista de Usuarios</h2>
  <table border="1" cellpadding="5">
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Usuario</th>
      <th>Rol</th>
      <th>Acciones</th>
    </tr>
    <% usuarios.forEach(u => { %>
      <tr>
        <td><%= u.id %></td>
        <td><%= u.nombre %></td>
        <td><%= u.usuario %></td>
        <td><%= u.rol %></td>
        <td>
          <form action="/usuarios/eliminar/<%= u.id %>" method="POST" onsubmit="return confirm('¿Eliminar usuario?')">
            <button type="submit">Eliminar</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </table>
</body>
</html>
